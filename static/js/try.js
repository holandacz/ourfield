// Generated by CoffeeScript 1.2.1-pre
(function() {

  $(document).ready(function() {
    var ContentView, Item, ItemCollection, MenuView, NavigationRouter, navigationRouter;
    Item = Backbone.Model.extend({});
    ItemCollection = Backbone.Collection.extend({
      model: Item,
      comparator: function(item) {
        return item.get("position");
      }
    });
    MenuView = Backbone.View.extend({
      el: $("#backbone-menu"),
      template: $("#item-tmpl").template(),
      render: function() {
        this.el.empty();
        $.tmpl(this.template, this.model.toArray()).appendTo(this.el);
        return this;
      }
    });
    ContentView = Backbone.View.extend({
      el: $("#backbone-content"),
      template: $("#content-tmpl").template(),
      render: function() {
        this.el.empty();
        $.tmpl(this.template, this.model).appendTo(this.el);
        return this;
      }
    });
    NavigationRouter = Backbone.Router.extend({
      _data: null,
      _items: null,
      _view: null,
      routes: {
        "info/:id": "showInfo",
        "*actions": "defaultRoute"
      },
      initialize: function(options) {
        var _this;
        _this = this;
        $.ajax({
          url: "Backboneapp_data.json",
          dataType: "json",
          data: {},
          async: false,
          success: function(data) {
            _this._data = data;
            _this._items = new ItemCollection(data);
            _this._view = new MenuView({
              model: _this._items
            });
            _this._view.render();
            return Backbone.history.loadUrl();
          }
        });
        return this;
      },
      defaultRoute: function(actions) {
        return this.showInfo(1);
      },
      showInfo: function(id) {
        var view;
        view = new ContentView({
          model: this._items.at(id - 1)
        });
        $(".active").removeClass("active");
        $("#item" + id).addClass("active");
        return view.render();
      }
    });
    navigationRouter = new NavigationRouter;
    return Backbone.history.start();
  });

}).call(this);
